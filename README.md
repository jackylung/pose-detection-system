# 姿勢檢測動作辨識系統

一個使用MediaPipe技術的即時姿勢檢測系統，能根據使用者的身體動作觸發鍵盤按鍵輸出，並提供語音提示和GUI界面。

## 系統特色

### 🎯 動作辨識功能
- **7種動作檢測**：舉起左手/右手、抬起左腳/右腳、向左/右轉身、點頭
- **即時檢測**：基於MediaPipe的高效姿勢檢測
- **容錯機制**：連續檢測1秒才觸發，避免誤判
- **自動校準**：啟動時自動校準標準站立姿勢

### 🎵 語音系統
- **多語言支援**：使用gTTS進行粵語語音合成
- **語音提示**：系統狀態、動作說明、成功檢測等語音反饋
- **語音控制**：可開啟/關閉語音模式，調節音量
- **循環播放**：可設定定時播放動作說明

### 🖥️ 圖形界面
- **直觀操作**：使用Tkinter製作的友好GUI界面
- **即時顯示**：攝影機畫面、骨骼檢測、系統狀態
- **動作控制**：每個動作可單獨開啟/關閉
- **大尺寸顯示**：按鍵輸出的大字符顯示

## 動作-按鍵對應表

| 動作 | 按鍵 | 說明 |
|------|------|------|
| 舉起左手 | A | 左手腕高於肩膀 |
| 舉起右手 | B | 右手腕高於肩膀 |
| 舉起左腳 | C | 左腳踝明顯抬高 |
| 舉起右腳 | D | 右腳踝明顯抬高 |
| 向左轉身 | E | 身體向左旋轉 |
| 向右轉身 | F | 身體向右旋轉 |
| 點點頭 | G | 頭部上下移動 |

## 系統需求

### 硬體需求
- **攝影機**：USB網路攝影機或筆記本內建攝影機
- **音訊設備**：喇叭或耳機（語音輸出）
- **處理器**：支援即時視頻處理的CPU
- **記憶體**：建議4GB以上RAM

### 軟體需求
- **作業系統**：Windows 11、Raspberry Pi OS、或其他Linux發行版
- **Python**：3.8或更高版本（建議3.10+）
- **攝影機驅動**：支援標準USB Video Class (UVC)

### 相容性
- ✅ Windows 11 筆記本電腦
- ✅ Raspberry Pi 5 + 7寸螢幕
- ✅ 一般USB攝影機
- ✅ 藍牙/USB喇叭

## 安裝與使用

### 方法一：使用打包版本（推薦用戶）
1. 從Release頁面下載最新的打包版本
2. 解壓縮後雙擊 `姿勢檢測系統.exe` 即可運行

### 方法二：源碼運行（推薦開發者）
1. 確保已安裝Python 3.10或更高版本
2. 克隆此倉庫：
   ```bash
   git clone https://github.com/jackylung/pose-detection-system.git
   cd pose-detection-system
   ```
3. 安裝依賴：
   ```bash
   pip install -r requirements.txt
   ```
4. 運行系統：
   ```bash
   python main.py
   ```

## 操作說明

### 初次使用
1. **啟動系統**：執行主程式
2. **校準姿勢**：按照語音提示站立標準姿勢
3. **等待校準**：保持姿勢直到聽到「校準完成」
4. **開始使用**：執行各種動作來觸發按鍵

### GUI操作
- **啟動/停止**：點擊系統控制按鈕
- **校準**：點擊校準按鈕重新校準
- **語音控制**：勾選/取消語音模式
- **音量調節**：拖動音量滑桿
- **動作設定**：勾選要檢測的動作
- **播放說明**：點擊播放動作說明按鈕

### 最佳使用技巧
1. **光線充足**：確保攝影機前光線良好
2. **背景簡潔**：避免複雜背景干擾檢測
3. **距離適中**：站在攝影機前1-2公尺處
4. **動作明確**：做動作時要明確、持續1秒以上
5. **穿著對比**：穿著與背景對比度高的衣服

## 故障排除

### 常見問題

**Q: 攝影機無法開啟**
- 檢查攝影機是否被其他程式使用
- 嘗試更換USB連接埠
- 檢查攝影機驅動程式

**Q: 姿勢檢測不準確**
- 重新執行校準
- 改善光線條件
- 調整與攝影機的距離

**Q: 語音無法播放**
- 檢查音訊設備連接
- 確認系統音量設定
- 檢查網路連接（gTTS需要網路）

**Q: 動作觸發太敏感/不敏感**
- 調整檢測閾值（在messages.py中的DetectionThresholds類）
- 重新校準姿勢
- 確保動作足夠明顯

### 日誌檢查
系統會產生詳細日誌檔案 `pose_detection.log`，可以檢查具體錯誤信息。

## 專案結構

```
pose_detection/
├── main.py                 # 主程式入口
├── pose_detector.py        # 姿勢檢測核心
├── gui_app.py             # GUI界面
├── audio_manager.py       # 語音管理
├── messages.py            # 訊息和配置
├── utils.py               # 工具函數
├── requirements.txt       # 依賴清單
├── sounds/               # 語音檔案目錄
└── README.md             # 說明文件
```

注意：為了保持倉庫的簡潔性，測試文件和打包工具已被移除。

## 技術規格

### 依賴庫
- **MediaPipe 0.10.21+**：姿勢檢測
- **OpenCV 4.11.0+**：影像處理
- **NumPy 1.26.4+**：數值計算
- **Pygame 2.6.1+**：音訊播放
- **gTTS 2.5.4+**：語音合成
- **Pillow 11.1.0+**：圖像處理
- **keyboard/pynput**：鍵盤模擬

### 性能數據
- **檢測延遲**：< 50ms
- **幀率**：30 FPS
- **記憶體使用**：< 500MB
- **CPU使用率**：< 30%（一般情況）

## 開發與貢獻

歡迎提交Issue和Pull Request來改善此項目。

## 授權

本項目採用MIT授權。

---

**享受您的姿勢檢測體驗！** 🎉